{
  "kind": "spec_vs_diff_report",
  "version": "1.0",
  "generatedAt": "2026-02-04T13:28:42.185Z",
  "summary": "REQ-12 appears partially implemented: `globalInviteCode` is set to \"dagger\" in `backend/main.mo`, but the diff snippet does not include the `acceptInvite` implementation so the required accept/trap behaviors cannot be verified from the provided evidence. The change also violates the constraint to modify only `backend/main.mo` by adding `backend/migration.mo` and modifying `project_state.json`.",
  "missing_requirements": [
    {
      "id": "REQ-12",
      "requirement": "Calling `acceptInvite(username, \"dagger\")` succeeds when capacity is not exceeded and the username is unique; calling `acceptInvite(username, <any other code>)` traps with an invalid invite code error (unchanged behavior).",
      "reason": "The provided `backend/main.mo` diff is truncated before the `acceptInvite` function, so there is no visible evidence that invite-code validation uses the updated constant and preserves the specified success/trap behaviors.",
      "evidence": [
        "backend/main.mo (truncated; `acceptInvite` not shown)"
      ]
    },
    {
      "requirement": "Implement changes only in `backend/main.mo` (do not modify other files).",
      "reason": "The diff includes an added backend file and a modified JSON file, which indicates changes outside `backend/main.mo`.",
      "evidence": [
        "backend/migration.mo (added)",
        "project_state.json (modified)"
      ]
    }
  ],
  "hallucinated_features": [
    {
      "description": "Added a new `backend/migration.mo` module and wired migration into `backend/main.mo` via `import Migration \"migration\"` and `(with migration = Migration.run)`.",
      "reason": "The BuildRequest only asked to change the global registration invite code; it explicitly constrained changes to `backend/main.mo` and did not request introducing migrations.",
      "evidence": [
        "backend/migration.mo",
        "backend/main.mo"
      ]
    },
    {
      "description": "Updated `project_state.json` project metadata/feature listing.",
      "reason": "No requirement requested updating project state metadata; the change is outside the allowed backend-only modification scope.",
      "evidence": [
        "project_state.json"
      ]
    }
  ],
  "confidence": 0.66,
  "changed_files": [
    "backend/main.mo",
    "backend/migration.mo",
    "project_state.json"
  ]
}