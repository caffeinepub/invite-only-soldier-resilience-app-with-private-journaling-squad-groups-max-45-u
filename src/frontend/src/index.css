@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  :root {
    /* OKLCH Color System - Light Mode */
    --background: 0% 0 0; /* Pure white */
    --foreground: 20% 0.01 0; /* Near black */

    --card: 98% 0 0; /* Off-white */
    --card-foreground: 20% 0.01 0;

    --popover: 98% 0 0;
    --popover-foreground: 20% 0.01 0;

    /* Primary: Deep Red (Dagger Brigade) */
    --primary: 45% 0.18 25; /* Deep red */
    --primary-foreground: 98% 0 0;

    /* Secondary: Neutral Gray */
    --secondary: 85% 0.01 0;
    --secondary-foreground: 20% 0.01 0;

    /* Muted: Light Gray */
    --muted: 92% 0.01 0;
    --muted-foreground: 50% 0.01 0;

    /* Accent: Tactical Olive */
    --accent: 60% 0.08 120;
    --accent-foreground: 20% 0.01 0;

    /* Destructive: Bright Red */
    --destructive: 55% 0.22 25;
    --destructive-foreground: 98% 0 0;

    --border: 88% 0.01 0;
    --input: 88% 0.01 0;
    --ring: 45% 0.18 25;

    --radius: 0.5rem;

    /* Chart colors */
    --chart-1: 60% 0.15 25;
    --chart-2: 65% 0.12 120;
    --chart-3: 70% 0.10 200;
    --chart-4: 75% 0.08 280;
    --chart-5: 55% 0.18 340;
  }

  .dark {
    /* OKLCH Color System - Dark Mode */
    --background: 18% 0.01 0; /* Dark gray-black */
    --foreground: 95% 0 0; /* Off-white */

    --card: 22% 0.01 0;
    --card-foreground: 95% 0 0;

    --popover: 22% 0.01 0;
    --popover-foreground: 95% 0 0;

    /* Primary: Bright Red (more vibrant in dark) */
    --primary: 58% 0.20 25;
    --primary-foreground: 18% 0.01 0;

    /* Secondary: Medium Gray */
    --secondary: 30% 0.01 0;
    --secondary-foreground: 95% 0 0;

    /* Muted: Dark Gray */
    --muted: 28% 0.01 0;
    --muted-foreground: 65% 0.01 0;

    /* Accent: Tactical Olive (adjusted for dark) */
    --accent: 55% 0.10 120;
    --accent-foreground: 95% 0 0;

    /* Destructive: Bright Red */
    --destructive: 58% 0.22 25;
    --destructive-foreground: 95% 0 0;

    --border: 28% 0.01 0;
    --input: 28% 0.01 0;
    --ring: 58% 0.20 25;

    /* Chart colors (adjusted for dark) */
    --chart-1: 65% 0.18 25;
    --chart-2: 70% 0.15 120;
    --chart-3: 75% 0.12 200;
    --chart-4: 80% 0.10 280;
    --chart-5: 60% 0.20 340;
  }
}

@layer base {
  * {
    @apply border-border;
  }
  body {
    @apply bg-background text-foreground;
    font-feature-settings: "rlig" 1, "calt" 1;
  }
}

/* Mobile-safe layout safeguards */
@layer base {
  html,
  body,
  #root {
    @apply h-full w-full overflow-hidden;
  }

  /* Prevent horizontal overflow on mobile */
  body {
    overflow-x: hidden;
    -webkit-overflow-scrolling: touch;
  }

  /* Ensure touch targets meet minimum size on mobile */
  @media (max-width: 768px) {
    button,
    a,
    [role="button"],
    input[type="checkbox"],
    input[type="radio"] {
      min-height: 44px;
      min-width: 44px;
    }
  }
}

/* Readiness State Colors */
@layer utilities {
  .readiness-optimal {
    @apply bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-400;
  }
  .readiness-good {
    @apply bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-400;
  }
  .readiness-moderate {
    @apply bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-400;
  }
  .readiness-low {
    @apply bg-orange-100 text-orange-800 dark:bg-orange-900/30 dark:text-orange-400;
  }
  .readiness-critical {
    @apply bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-400;
  }
}

/* Field Mode Utilities */
@layer utilities {
  .field-mode-active {
    @apply bg-muted/50;
  }
  .field-mode-hidden {
    @apply hidden;
  }
}

/* Critical Layout Rules */
@layer base {
  /* Ensure main content is always interactive */
  main {
    pointer-events: auto;
    position: relative;
    z-index: 1;
  }

  /* Sidebar should not block main content */
  aside {
    position: relative;
    z-index: 10;
  }

  /* Overlays and modals should be on top */
  [role="dialog"],
  [role="alertdialog"] {
    z-index: 50;
  }
}
